var one={global:{remoteAddress:"http://odl.cloudistic.me:8080/"},role:null};one.lib={},one.lib.registry={},one.lib.dashlet={empty:function(e){e.empty()},append:function(e,t){e.append(t)},header:function(e){var t=$(document.createElement("h4"));return t.text(e),t},label:function(e,t){var n=$(document.createElement("span"));return n.addClass("label"),t!==undefined?n.addClass(t):t!==null&&n.addClass("label-info"),n.append(e),n},list:function(e){var t=$(document.createElement("ul"));return $(e).each(function(e,n){var r=$(document.createElement("li"));r.append(n),t.append(r)}),t},button:{config:function(e,t,n,r){var i={};return i.name=e,i.id=t,i.type=n,i.size=r,i},single:function(e,t,n,r){var i=[],s=one.lib.dashlet.button.config(e,t,n,r);return i.push(s),i},button:function(e){var t=$(document.createElement("div"));return t.addClass("btn-group"),$(e).each(function(e,n){var r=$(document.createElement("button"));r.text(n.name),r.addClass("btn"),r.addClass(n.type),r.addClass(n.size),typeof n.id!="undefined"&&r.attr("id",n.id),t.append(r)}),t}},datagrid:{init:function(e,t,n){var r=$(document.createElement("div"));return r.addClass("fuelux"),$table=$(document.createElement("table")),$table.attr("id",e),$table.addClass("table table-bordered datagrid"),$table.addClass(n),$thead=$(document.createElement("thead")),$headertr=$(document.createElement("tr")),$headerth=$(document.createElement("th")),$tfoot=$(document.createElement("tfoot")),$footertr=$(document.createElement("tr")),$footerth=$(document.createElement("th")),t.searchable==1&&$headerth.append(one.lib.dashlet.datagrid._searchable()),t.flexibleRowsPerPage==1&&$footerth.append(one.lib.dashlet.datagrid._rowsPerPage(t.popout)),t.pagination==1&&$footerth.append(one.lib.dashlet.datagrid._pagination()),$headertr.append($headerth),$thead.append($headertr),$footertr.append($footerth),$tfoot.append($footertr),$table.append($thead).append($tfoot),r.append($table),r},_searchable:function(){var e="<div class='datagrid-header-left'><div class='input-append search datagrid-search'> <input type='text' class='input-medium' placeholder='Search'><button type='button' class='btn'><i class='icon-search'></i></button></div></div>";return e},_pagination:function(){var e='<div class="datagrid-footer-right" style="display:none;"><div class="grid-pager"><button type="button" class="btn grid-prevpage"><i class="icon-chevron-left"></i></button><span>Page</span> <div style="display:inline-block;"><input type="text" name="pagenumber" style="width:25px;margin-bottom:-10px;vertical-align:middle;margin-right:5px;"></div><span>of <span class="grid-pages"></span></span><button type="button" class="btn grid-nextpage"><i class="icon-chevron-right"></i></button></div></div>';return e},_rowsPerPage:function(e){if(e)var t='<div class="datagrid-footer-left" style="display:none;"><div class="grid-controls"><span><span class="grid-start"></span>-<span class="grid-end"></span> of <span class="grid-count"></span></span><div class="select grid-pagesize" data-resize="auto" style="visibility:hidden;"><button type="button" data-toggle="dropdown" class="btn dropdown-toggle"><span class="dropdown-label"></span><span class="caret"></span></button><ul class="dropdown-menu"><li data-value="10" data-selected="true"><a href="#">5</a></li><li data-value="10"><a href="#">10</a></li><li data-value="20"><a href="#">20</a></li><li data-value="50"><a href="#">50</a></li><li data-value="100"><a href="#">100</a></li></ul></div><span style="display:none;">Per Page</span></div></div>';else var t='<div class="datagrid-footer-left" style="display:none;"><div class="grid-controls"><span><span class="grid-start"></span>-<span class="grid-end"></span> of <span class="grid-count"></span></span><div class="select grid-pagesize" data-resize="auto" style="visibility:hidden;"><button type="button" data-toggle="dropdown" class="btn dropdown-toggle"><span class="dropdown-label"></span><span class="caret"></span></button><ul class="dropdown-menu"><li data-value="5" data-selected="true"><a href="#">5</a></li><li data-value="10"><a href="#">10</a></li><li data-value="20"><a href="#">20</a></li><li data-value="50"><a href="#">50</a></li><li data-value="100"><a href="#">100</a></li></ul></div><span style="display:none;">Per Page</span></div></div>';return t}},table:{table:function(e,t){var n=$(document.createElement("table"));return n.addClass("table"),$(e).each(function(e,t){n.addClass(t)}),typeof t!="undefined"&&n.attr("id",t),n},header:function(e){var t=$(document.createElement("thead")),n=$(document.createElement("tr"));return $(e).each(function(e,t){$th=$(document.createElement("th")),$th.append(t),n.append($th)}),t.append(n),t},body:function(e,t){var n=$(document.createElement("tbody"));if(e.length==0&&typeof t!="undefined"){var r=$(document.createElement("tr")),i=$(document.createElement("td"));return i.attr("colspan",t.length),i.text("No data available"),i.addClass("empty"),r.append(i),n.append(r),n}return $(e).each(function(e,t){var r=$(document.createElement("tr"));$.each(t,function(e,t){e=="type"?$(t).each(function(e,t){r.addClass(t)}):e=="entry"?$(t).each(function(e,t){var n=$(document.createElement("td"));n.append(t),r.append(n)}):r.attr("data-"+e,t),n.append(r)})}),n}},description:function(e,t){var n=$(document.createElement("dl"));return t==1&&n.addClass("dl-horizontal"),$(e).each(function(e,t){var r=$(document.createElement("dt"));r.text(t.dt);var i=$(document.createElement("dd"));i.text(t.dd),n.append(r).append(i)}),n}},one.lib.modal={clone:function(e){var t=$("#modal").clone(!0);return t.attr("id",e),t},populate:function(e,t,n,r,i){i===undefined&&i!==!1&&$.getJSON(one.global.remoteAddress+"web.json");var s=e.find("h3");s.text(t);var o=e.find(".modal-body");o.append(n),$(r).each(function(t,n){e.find(".modal-footer").append(n)})},spawn:function(e,t,n,r){var i=one.lib.modal.clone(e);return one.lib.modal.populate(i,t,n,r),i.on("hide",function(){$(".modal-body").scrollTop(0)}),i},empty:function(e){e.find("h3").empty(),e.find(".modal-body").empty(),e.find(".modal-footer").empty()},inject:{body:function(e,t){e.find(".modal-body").empty(),e.find(".modal-body").append(t)}}},one.lib.form={select:{create:function(e,t,n){e==undefined&&(e={});var r=$(document.createElement("select"));t==1&&r.attr("multiple","multiple");var i=one.lib.form.select.options(e);if(n==1&&i.length>1){var s=!0,o=i.length;while(s){s=!1;for(var u=1;u<o;u++)if(i[u-1].text()>i[u].text()){var a=i[u-1];i[u-1]=i[u],i[u]=a,s=!0}}}return $(i).each(function(e,t){r.append(t)}),r},options:function(e){var t=[];return $.each(e,function(e,n){var r=$(document.createElement("option"));r.attr("value",e),r.text(n),t.push(r)}),t},empty:function(e){e.empty()},inject:function(e,t){e.empty();var t=one.lib.form.select.options(t);e.append(t)},prepend:function(e,t){var t=one.lib.form.select.options(t);e.prepend(t)},bubble:function(e,t){$(e.find("option")).each(function(n,r){if($(r).attr("value")==t){var i=$(r);$(r).remove(),e.prepend(i);return}})}},legend:function(e){var t=$(document.createElement("legend"));return t.text(e),t},label:function(e){var t=$(document.createElement("label"));return t.text(e),t},help:function(e){var t=$(document.createElement("span"));return t.text(e),t.addClass("help-block"),t},input:function(e){var t=$(document.createElement("input"));return t.attr("type","text"),t.attr("placeholder",e),t}},one.lib.nav={unfocus:function(e){$(e.find("li")).each(function(e,t){$(t).removeClass("active")})}},one.lib.alert=function(e){$("#alert p").text(e),$("#alert").hide(),$("#alert").slideToggle(),clearTimeout(one.lib.registry.alert),one.lib.registry.alert=setTimeout(function(){$("#alert").slideUp()},8e3)},one.main={},one.main.constants={address:{menu:one.global.remoteAddress+"web.json",prefix:one.global.remoteAddress+"controller/web",save:one.global.remoteAddress+"save"}},one.main.menu={registry:{load:!1},load:function(){one.main.menu.ajax(function(e){var t=one.main.menu.data.menu(e),n=one.main.menu.menu(t);$("#menu .nav").append(n.children());var r=$("#menu .nav a");r.click(function(){if(one.main.menu.registry.load===!0)return!1;one.main.menu.registry.load=!0;var e=$(this).attr("href").substring(1);one.main.page.load(e);var t=$(this).parent();r.each(function(e,t){$(t).parent().removeClass("active")}),t.addClass("active")});var i=location.hash;e[i.substring(1)]==undefined?$(r[0]).click():r.each(function(e,t){var n=$(t).attr("href");if(i==n){$(r[e]).click();return}})})},menu:function(e){var t=$(document.createElement("div"));return $(e).each(function(e,n){if(n!=undefined){var r=$(document.createElement("li")),i=$(document.createElement("a"));i.text(n.name),i.attr("href","#"+n.id),r.append(i),t.append(r)}}),t},ajax:function(e){$.getJSON(one.main.constants.address.menu,function(t){e(t)})},data:{menu:function(e){var t=[];return $.each(e,function(e,n){var r=n.order;if(r>=0){var i=n.name,s={name:i,id:e};t[r]=s}}),t}}},one.main.page={load:function(e){one.f!==undefined&&one.f.cleanUp!==undefined&&one.f.cleanUp(),delete one.f,$(".dashlet","#main").empty(),$(".nav","#main").empty(),$.getScript(one.main.constants.address.prefix+"/"+e+"/js/page.js").success(function(){one.main.menu.registry.load=!1}),$.ajaxSetup({data:{"x-page-url":e}})},dashlet:function(e,t){var n=$(document.createElement("li")),r=$(document.createElement("a"));r.text(t.name),r.attr("id",t.id),r.attr("href","#"),n.append(r),e.append(n)}},one.main.admin={id:{modal:{main:"one_main_admin_id_modal_main",close:"one_main_admin_id_modal_close",user:"one_main_admin_id_modal_user",add:{user:"one_main_admin_id_modal_add_user",close:"one_main_admin_id_modal_add_close",form:{name:"one_main_admin_id_modal_add_form_name",role:"one_main_admin_id_modal_add_form_role",password:"one_main_admin_id_modal_add_form_password",verify:"one_main_admin_id_modal_add_form_verify"}},remove:{user:"one_main_admin_id_modal_remove_user",close:"one_main_admin_id_modal_remove_close",password:"one_main_admin_id_modal_remove_password"},modify:{user:"one_main_admin_id_modal_modify_user"},password:{modal:"one_main_admin_id_modal_password_modal",submit:"one_main_admin_id_modal_password_submit",cancel:"one_main_admin_id_modal_password_cancel",form:{old:"one_main_admin_id_modal_password_form_old",set:"one_main_admin_id_modal_password_form_new",verify:"one_main_admin_id_modal_password_form_verify"}}},add:{user:"one_main_admin_id_add_user"}},registry:{},address:{root:"/admin",users:"/users",modifyUser:"/user/modify",password:"/admin/users/password/"},modal:{initialize:function(e){var t="Welcome "+$("#admin").text(),n=one.main.admin.modal.footer(),r=one.lib.modal.spawn(one.main.admin.id.modal.main,t,"",n);$("#"+one.main.admin.id.modal.close,r).click(function(){r.modal("hide")}),one.main.admin.ajax.users(function(e){one.lib.modal.inject.body(r,e)}),e(r)},footer:function(){var e=[],t=one.lib.dashlet.button.single("Close",one.main.admin.id.modal.close,"",""),n=one.lib.dashlet.button.button(t);return e.push(n),e}},ajax:{users:function(e){$.getJSON(one.main.admin.address.root+one.main.admin.address.users,function(t){var n=one.main.admin.data.users(t);one.main.admin.registry.users=t;var r=one.main.admin.body.users(n);e(r)})}},data:{users:function(e){var t=[];return $(e).each(function(e,n){var r={},i=[];i.push(n.user),i.push(n.roles),r.entry=i,r.id=n.user,t.push(r)}),t}},body:{users:function(e){var t=$(document.createElement("div")),n=$(document.createElement("h5"));n.append("Manage Users");var r=["table-striped","table-bordered","table-hover","table-cursor"],i=one.lib.dashlet.table.table(r),s=["User","Role"],o=one.lib.dashlet.table.header(s),u=one.lib.dashlet.table.body(e);i.append(o).append(u),one.role<2&&i.find("tr").click(function(){var e=$(this).data("id");one.main.admin.remove.modal.initialize(e)}),t.append(n).append(i);if(one.role<2){var a=one.lib.dashlet.button.single("Add User",one.main.admin.id.add.user,"btn-primary","btn-mini"),f=one.lib.dashlet.button.button(a);t.append(f),f.click(function(){one.main.admin.add.modal.initialize()})}return t}},remove:{modal:{initialize:function(e){var t="Manage user - "+e,n=one.main.admin.remove.footer(),r=one.main.admin.remove.body(),i=one.lib.modal.spawn(one.main.admin.id.modal.user,t,r,n);$("#"+one.main.admin.id.modal.remove.close,i).click(function(){i.modal("hide")}),$("#"+one.main.admin.id.modal.modify.user,i).click(function(){one.main.admin.add.modal.initialize(e,!0)}),$("#"+one.main.admin.id.modal.remove.user,i).click(function(){one.main.admin.remove.modal.ajax(e,function(e){if(e.description=="Success"){i.modal("hide");var t=$("#"+one.main.admin.id.modal.main);one.main.admin.ajax.users(function(e){one.lib.modal.inject.body(t,e)})}else alert("Failed to remove user: "+e.description)})}),$("#"+one.main.admin.id.modal.remove.password,i).click(function(){one.main.admin.password.initialize(e,function(){i.modal("hide")})}),i.modal()},ajax:function(e,t){$.post(one.main.admin.address.root+one.main.admin.address.users+"/"+e,function(e){t(e)})}},footer:function(){var e=[],t=one.lib.dashlet.button.single("Remove User",one.main.admin.id.modal.remove.user,"btn-danger",""),n=one.lib.dashlet.button.button(t);e.push(n);var r=one.lib.dashlet.button.single("Change Role",one.main.admin.id.modal.modify.user,"btn-success",""),i=one.lib.dashlet.button.button(r);e.push(i);var s=one.lib.dashlet.button.single("Change Password",one.main.admin.id.modal.remove.password,"btn-success",""),o=one.lib.dashlet.button.button(s);e.push(o);var u=one.lib.dashlet.button.single("Close",one.main.admin.id.modal.remove.close,"",""),a=one.lib.dashlet.button.button(u);return e.push(a),e},body:function(){var e=$(document.createElement("p"));return e.append("Select an action"),e}},add:{modal:{initialize:function(e,t){var n=t?"Change Role of user "+e:"Add User",r=one.main.admin.add.footer(t),i=one.main.admin.add.body(e,t),s=one.lib.modal.spawn(one.main.admin.id.modal.user,n,i,r);$("#"+one.main.admin.id.modal.add.close,s).click(function(){s.modal("hide")}),$("#"+one.main.admin.id.modal.add.user,s).click(function(){one.main.admin.add.modal.add(s,t,function(e){if(e.description=="Success"){s.modal("hide");var n=$("#"+one.main.admin.id.modal.main);one.main.admin.ajax.users(function(e){one.lib.modal.inject.body(n,e)})}else{var r=t?"edit":"add";alert("Failed to "+r+" user: "+e.description)}})}),s.modal()},add:function(e,t,n){var r={};r.user=e.find("#"+one.main.admin.id.modal.add.form.name).val(),t||(r.password=e.find("#"+one.main.admin.id.modal.add.form.password).val()),roles=new Array,roles[0]=e.find("#"+one.main.admin.id.modal.add.form.role).find("option:selected").attr("value"),r.roles=roles;if(!t){var i=$("#"+one.main.admin.id.modal.add.form.verify).val();if(r.password!=i)return alert("Passwords do not match"),!1}var s={};s.json=JSON.stringify(r),s.action="add",one.main.admin.add.modal.ajax(s,t,n)},ajax:function(e,t,n){t?$.post(one.main.admin.address.root+one.main.admin.address.modifyUser,e,function(e){n(e)}):$.post(one.main.admin.address.root+one.main.admin.address.users,e,function(e){n(e)})}},body:function(e,t){var n=$(document.createElement("form")),r=$(document.createElement("fieldset")),i=one.main.admin.registry.users,s;t&&$(i).each(function(t,n){n.user==e&&(s=n)});var o=one.lib.form.label("Username"),u=one.lib.form.input("Username");u.attr("id",one.main.admin.id.modal.add.form.name),t&&(u.attr("disabled",!0),u.val(e)),r.append(o).append(u);if(!t){var o=one.lib.form.label("Password"),u=one.lib.form.input("Password");u.attr("id",one.main.admin.id.modal.add.form.password),u.attr("type","password"),r.append(o).append(u);var o=one.lib.form.label("Verify Password"),u=one.lib.form.input("Verify Password");u.attr("id",one.main.admin.id.modal.add.form.verify),u.attr("type","password"),r.append(o).append(u)}var o=one.lib.form.label("Roles"),a={"Network-Admin":"Network Administrator","Network-Operator":"Network Operator"},f=one.lib.form.select.create(a);return f.attr("id",one.main.admin.id.modal.add.form.role),t&&f.children().each(function(){this.selected=this.text==a[s.roles[0]]}),r.append(o).append(f),n.append(r),n},footer:function(e){var t=[],n=e?"Update User":"Add User",r=one.lib.dashlet.button.single(n,one.main.admin.id.modal.add.user,"btn-primary",""),i=one.lib.dashlet.button.button(r);t.push(i);var s=one.lib.dashlet.button.single("Close",one.main.admin.id.modal.add.close,"",""),o=one.lib.dashlet.button.button(s);return t.push(o),t}},password:{initialize:function(e,t){var n="Change Password",r=one.main.admin.password.footer(),i=one.main.admin.password.body(e),s=one.lib.modal.spawn(one.main.admin.id.modal.password.modal,n,i,r);$("#"+one.main.admin.id.modal.password.cancel,s).click(function(){s.modal("hide")}),$("#"+one.main.admin.id.modal.password.submit,s).click(function(){one.main.admin.password.submit(e,s,function(t){t.success?e.trim()==$("#currentuser").val().trim()&&(alert("Password changed successfully. Please re-login with your new password."),window.location="/"):alert(t.code+": "+t.description)})}),s.modal()},submit:function(e,t,n){var r={};r.newPassword=$("#"+one.main.admin.id.modal.password.form.set,t).val();var i=$("#"+one.main.admin.id.modal.password.form.verify,t).val();if(i!=r.newPassword)return alert("Passwords do not match"),!1;r.currentPassword=$("#"+one.main.admin.id.modal.password.form.old,t).val(),$.post(one.main.admin.address.password+e,r,function(e){n(e)})},body:function(e){var t=$(document.createElement("form")),n=$(document.createElement("fieldset")),r=one.lib.form.label("Username"),i=one.lib.form.input("");i.attr("disabled","disabled"),i.val(e),n.append(r).append(i);var r=one.lib.form.label("Old Password"),i=one.lib.form.input("Old Password");i.attr("id",one.main.admin.id.modal.password.form.old),i.attr("type","password"),n.append(r).append(i);var r=one.lib.form.label("New Password"),i=one.lib.form.input("New Password");i.attr("id",one.main.admin.id.modal.password.form.set),i.attr("type","password"),n.append(r).append(i);var r=one.lib.form.label("Verify Password"),i=one.lib.form.input("Verify Password");return i.attr("id",one.main.admin.id.modal.password.form.verify),i.attr("type","password"),n.append(r).append(i),t.append(n),t},footer:function(){var e=[],t=one.lib.dashlet.button.single("Submit",one.main.admin.id.modal.password.submit,"btn-primary",""),n=one.lib.dashlet.button.button(t);e.push(n);var r=one.lib.dashlet.button.single("Cancel",one.main.admin.id.modal.password.cancel,"",""),i=one.lib.dashlet.button.button(r);return e.push(i),e}}},one.main.cluster={id:{modal:"one-main-cluster-id-modal",close:"one-main-cluster-id-close",datagrid:"one-main-cluster-id-datagrid"},initialize:function(){var e="Cluster Management",t=one.main.cluster.footer(),n="",r=one.lib.modal.spawn(one.main.cluster.id.modal,e,n,t);$("#"+one.main.cluster.id.close,r).click(function(){r.modal("hide")}),$.getJSON("/admin/cluster",function(e){var t=one.lib.dashlet.datagrid.init(one.main.cluster.id.datagrid,{searchable:!0,filterable:!1,pagination:!0,flexibleRowsPerPage:!0},"table-striped table-condensed table-cursor"),n=one.main.cluster.data(e);t.datagrid({dataSource:n}).on("loaded",function(){$(this).find("tbody tr").click(function(){var e=$(this);if(e.find("td:nth-child(1)").attr("colspan")==="1")return!1;var t=e.find(".ux-id").text();one.main.cluster.nodes.initialize(t)})}),one.lib.modal.inject.body(r,t)}),r.modal()},data:function(e){var t=[],n=[];$(e).each(function(e,n){var r=n.name,i=n.address,s=$(document.createElement("span"));s.append(JSON.stringify(i)).css("display","none").addClass("ux-id"),r=one.lib.dashlet.label(r,null)[0].outerHTML,r+=s[0].outerHTML;if(n.me===!0){var o=one.lib.dashlet.label("*","label-inverse")[0].outerHTML;r+="&nbsp;"+o}if(n.coordinator===!0){var u=one.lib.dashlet.label("C")[0].outerHTML;r+="&nbsp;"+u}t.push({controller:r,numNodes:n.numConnectedNodes})});var r=new StaticDataSource({columns:[{property:"controller",label:"Controller",sortable:!0},{property:"numNodes",label:"Nodes",sortable:!0}],data:t,delay:0});return r},footer:function(){var e=[],t=one.lib.dashlet.button.single("Close",one.main.cluster.id.close,"",""),n=one.lib.dashlet.button.button(t);return e.push(n),e}},one.main.cluster.nodes={id:{modal:"one-main-cluster-nodes-id-modal",close:"one-main-cluster-nodes-id-close",datagrid:"one-main-cluser-nodes-id-datagrid"},initialize:function(e){var t="Connected Nodes",n=one.main.cluster.nodes.footer(),r="",i=one.lib.modal.spawn(one.main.cluster.nodes.id.modal,t,r,n);$("#"+one.main.cluster.nodes.id.close,i).click(function(){i.modal("hide")}),$.getJSON("/admin/cluster/controller/"+e,function(e){var t=one.lib.dashlet.datagrid.init(one.main.cluster.nodes.id.datagrid,{searchable:!0,filterable:!1,pagination:!0,flexibleRowsPerPage:!0},"table-striped table-condensed"),n=one.main.cluster.nodes.data(e);t.datagrid({dataSource:n}),one.lib.modal.inject.body(i,t)}),i.modal()},data:function(e){var t=[];$(e).each(function(e,n){t.push({node:n.description})});var n=new StaticDataSource({columns:[{property:"node",label:"Node",sortable:!0}],data:t,delay:0});return n},footer:function(){var e=[],t=one.lib.dashlet.button.single("Close",one.main.cluster.nodes.id.close,"",""),n=one.lib.dashlet.button.button(t);return e.push(n),e}},one.main.dashlet={left:{top:$("#left-top .dashlet"),bottom:$("#left-bottom .dashlet")},right:{bottom:$("#right-bottom .dashlet")}},$(".modal").on("hidden",function(){$(this).remove()}),$("#alert .close").click(function(){$("#alert").hide()}),one.role=$("#admin").data("role"),$("#admin").click(function(){one.main.admin.modal.initialize(function(e){e.modal()})}),$("#cluster").click(function(){one.main.cluster.initialize()}),$("#save").click(function(){$.post(one.main.constants.address.save,function(e){e=="Success"?one.lib.alert("Configuration Saved"):one.lib.alert("Unable to save configuration: "+e)})}),$("#logout").click(function(){}),$("#osgi").click(function(){window.open("/controller/osgi/system/console","_newtab")}),$.ajaxSetup({complete:function(e,t){var n=e.getResponseHeader("Content-Type");alert(n),n.substring(0,9)=="text/html"}}),one.main.menu.load();var labelType,useGradients,nativeTextSupport,animate;(function(){var e=navigator.userAgent,t=e.match(/iPhone/i)||e.match(/iPad/i),n=typeof HTMLCanvasElement,r=n=="object"||n=="function",i=r&&typeof document.createElement("canvas").getContext("2d").fillText=="function";labelType=!r||i&&!t?"Native":"HTML",nativeTextSupport=labelType=="Native",useGradients=r,animate=!t&&!!r})(),one.topology={},one.topology.option={navigation:function(e,t,n){var r={};return r.enable=e,r.panning=t,r.zooming=n,r},node:function(e,t,n,r){var i={};return i.overridable=e,i.color=t,i.height=n,i.dim=r,i},edge:function(e,t,n,r){var i={};return i.overridable=e,i.color=t,i.lineWidth=n,r!=undefined&&(i.epsilon=r),i},label:function(e,t){var n,r;t.data["$type"]=="switch"?(n="42px",r="65px"):t.data["$type"]=="host"?(n="48px",r=""):t.data["$type"].indexOf("monitor")==0&&(n="52px",r=""),e.marginTop=n,e.minWidth=r,e.background="rgba(68,68,68,0.7)",e.borderRadius="4px",e.color="#fff",e.cursor="default"}},one.topology.init=function(e){console.log(e),alert("json");if(e.length==0)return $div=$(document.createElement("div")),$img=$(document.createElement("div")),$img.css("height","128px"),$img.css("width","128px"),$img.css("background-image","url(/img/topology_view_1033_128.png)"),$img.css("clear","both"),$img.css("margin","0 auto"),$p=$(document.createElement("p")),$p.addClass("text-center"),$p.addClass("text-info"),$p.css("width","100%"),$p.css("padding","10px 0"),$p.css("cursor","default"),$p.append("No Network Elements Connected"),$div.css("position","absolute"),$div.css("top","25%"),$div.css("margin","0 auto"),$div.css("width","100%"),$div.css("text-align","center"),$div.append($img).append($p),$("#topology").append($div),!1;alert("topology.graph"),one.topology.graph=new $jit.MultiTopology({injectInto:"topology",Navigation:one.topology.option.navigation(!0,"avoid nodes",10),Node:one.topology.option.node(!0,"#444",25,27),Edge:one.topology.option.edge(!0,"23A4FF",1.5),Tips:{enable:!0,type:"auto",offsetX:15,offsetY:15,onShow:function(e,t){t.name!=undefined&&(e.innerHTML="Name : "+t.name+"<br>"),t.data["$type"]!=undefined&&(e.innerHTML=e.innerHTML+"Type : "+t.data.$type+"<br>"),t.data["$desc"]!=undefined&&(e.innerHTML=e.innerHTML+"Description : "+t.data.$desc)}},Events:{enable:!0,type:"Native",onMouseEnter:function(e,t,n){e.id!=undefined?one.topology.graph.canvas.getElement().style.cursor="move":t.edge!=undefined&&t.edge.nodeTo.data["$type"]=="switch"&&t.edge.nodeFrom.data["$type"]=="switch"&&(one.topology.graph.canvas.getElement().style.cursor="pointer")},onMouseLeave:function(e,t,n){one.topology.graph.canvas.getElement().style.cursor=""},onDragMove:function(e,t,n){var r=t.getPos();e.pos.setc(r.x,r.y),one.topology.graph.plot(),one.topology.graph.canvas.getElement().style.cursor="crosshair"},onTouchMove:function(e,t,n){$jit.util.event.stop(n),this.onDragMove(e,t,n)},onDragEnd:function(e,t,n){var r=t.getPos(),i=e.id,s={};s.x=r.x,s.y=r.y,$.post(one.global.remoteAddress+"controller/web/topology/node/"+i,s)},onClick:function(e,t,n){if(one.topology===undefined)return!1;one.topology.Events.onClick(e,t)}},iterations:200,levelDistance:130,onCreateLabel:function(e,t){var n=document.createElement("span"),r=document.createElement("span"),i=n.style;n.className="name";var s=t.data.$desc;s=="None"||s==""||s=="undefined"||s==undefined?n.innerHTML="<small>"+t.name+"</small>":n.innerHTML=s,e.appendChild(n),i.fontSize="1.0em",i.color="#000",i.fontWeight="bold",i.width="100%",i.padding="1.5px 4px",i.display="block",one.topology.option.label(i,t)},onPlaceLabel:function(e,t){var n=e.style,r=parseInt(n.left),i=parseInt(n.top),s=e.offsetWidth;n.left=r-s/2+"px",n.top=i-15+"px",n.display="",n.minWidth="28px",n.width="auto",n.height="28px",n.textAlign="center"}}),one.topology.graph.loadJSON(e),one.topology.graph.computeIncremental({iter:40,property:"end",onStep:function(e){console.log(e+"% loaded")},onComplete:function(){for(var e in one.topology.graph.graph.nodes){var t=one.topology.graph.graph.nodes[e];if(t.getData("x")&&t.getData("y")){var n=t.getData("x"),r=t.getData("y");t.setPos(new $jit.Complex(n,r),"end")}}console.log("done"),one.topology.graph.animate({modes:["linear"],transition:$jit.Trans.Elastic.easeOut,duration:0})}}),one.topology.graph.canvas.setZoom(.8,.8)},one.topology.update=function(){alert("update"),$("#topology").empty(),$.getJSON(one.global.remoteAddress+"controller/web/topology/visual.json",function(e){one.topology.init(e)})},alert("insert"),one.topology.init([{id:"OF|00:00:00:00:00:00:00:01",name:"OF|00:00:00:00:00:00:00:01",data:{$x:"300",$y:"300",$type:"switch",$desc:"OF|00:00:00:00:00:00:00:01"},adjacencies:[{nodeTo:"OF|00:00:00:00:00:00:00:01",nodeFrom:"OF|00:00:00:00:00:00:00:05",data:{$nodeFromPortName:"OF|3@OF|00:00:00:00:00:00:00:05",$descFrom:"OF|00:00:00:00:00:00:00:05",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"2",$nodeToPortName:"OF|2@OF|00:00:00:00:00:00:00:01",$color:"#C6C014",$nodeFromPortDescription:"s5-eth3",$descTo:"OF|00:00:00:00:00:00:00:01",$nodeToPortDescription:"s1-eth2",$nodeFromPort:"3"}},{nodeTo:"OF|00:00:00:00:00:00:00:02",nodeFrom:"OF|00:00:00:00:00:00:00:01",data:{$nodeFromPortName:"OF|1@OF|00:00:00:00:00:00:00:01",$descFrom:"OF|00:00:00:00:00:00:00:01",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"3",$nodeToPortName:"OF|3@OF|00:00:00:00:00:00:00:02",$color:"#C6C014",$nodeFromPortDescription:"s1-eth1",$descTo:"OF|00:00:00:00:00:00:00:02",$nodeToPortDescription:"s2-eth3",$nodeFromPort:"1"}},{nodeTo:"OF|00:00:00:00:00:00:00:01",nodeFrom:"OF|00:00:00:00:00:00:00:02",data:{$nodeFromPortName:"OF|3@OF|00:00:00:00:00:00:00:02",$descFrom:"OF|00:00:00:00:00:00:00:02",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"1",$nodeToPortName:"OF|1@OF|00:00:00:00:00:00:00:01",$color:"#C6C014",$nodeFromPortDescription:"s2-eth3",$descTo:"OF|00:00:00:00:00:00:00:01",$nodeToPortDescription:"s1-eth1",$nodeFromPort:"3"}},{nodeTo:"OF|00:00:00:00:00:00:00:05",nodeFrom:"OF|00:00:00:00:00:00:00:01",data:{$nodeFromPortName:"OF|2@OF|00:00:00:00:00:00:00:01",$descFrom:"OF|00:00:00:00:00:00:00:01",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"3",$nodeToPortName:"OF|3@OF|00:00:00:00:00:00:00:05",$color:"#C6C014",$nodeFromPortDescription:"s1-eth2",$descTo:"OF|00:00:00:00:00:00:00:05",$nodeToPortDescription:"s5-eth3",$nodeFromPort:"2"}}]},{id:"OF|00:00:00:00:00:00:00:02",name:"OF|00:00:00:00:00:00:00:02",data:{$x:"-323.125",$y:"186.875",$type:"switch",$desc:"OF|00:00:00:00:00:00:00:02"},adjacencies:[{nodeTo:"OF|00:00:00:00:00:00:00:02",nodeFrom:"OF|00:00:00:00:00:00:00:03",data:{$nodeFromPortName:"OF|3@OF|00:00:00:00:00:00:00:03",$descFrom:"OF|00:00:00:00:00:00:00:03",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"1",$nodeToPortName:"OF|1@OF|00:00:00:00:00:00:00:02",$color:"#C6C014",$nodeFromPortDescription:"s3-eth3",$descTo:"OF|00:00:00:00:00:00:00:02",$nodeToPortDescription:"s2-eth1",$nodeFromPort:"3"}},{nodeTo:"OF|00:00:00:00:00:00:00:02",nodeFrom:"OF|00:00:00:00:00:00:00:04",data:{$nodeFromPortName:"OF|3@OF|00:00:00:00:00:00:00:04",$descFrom:"OF|00:00:00:00:00:00:00:04",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"2",$nodeToPortName:"OF|2@OF|00:00:00:00:00:00:00:02",$color:"#C6C014",$nodeFromPortDescription:"s4-eth3",$descTo:"OF|00:00:00:00:00:00:00:02",$nodeToPortDescription:"s2-eth2",$nodeFromPort:"3"}},{nodeTo:"OF|00:00:00:00:00:00:00:03",nodeFrom:"OF|00:00:00:00:00:00:00:02",data:{$nodeFromPortName:"OF|1@OF|00:00:00:00:00:00:00:02",$descFrom:"OF|00:00:00:00:00:00:00:02",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"3",$nodeToPortName:"OF|3@OF|00:00:00:00:00:00:00:03",$color:"#C6C014",$nodeFromPortDescription:"s2-eth1",$descTo:"OF|00:00:00:00:00:00:00:03",$nodeToPortDescription:"s3-eth3",$nodeFromPort:"1"}},{nodeTo:"OF|00:00:00:00:00:00:00:04",nodeFrom:"OF|00:00:00:00:00:00:00:02",data:{$nodeFromPortName:"OF|2@OF|00:00:00:00:00:00:00:02",$descFrom:"OF|00:00:00:00:00:00:00:02",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"3",$nodeToPortName:"OF|3@OF|00:00:00:00:00:00:00:04",$color:"#C6C014",$nodeFromPortDescription:"s2-eth2",$descTo:"OF|00:00:00:00:00:00:00:04",$nodeToPortDescription:"s4-eth3",$nodeFromPort:"2"}},{nodeTo:"OF|00:00:00:00:00:00:00:02",nodeFrom:"OF|00:00:00:00:00:00:00:01",data:{$nodeFromPortName:"OF|1@OF|00:00:00:00:00:00:00:01",$descFrom:"OF|00:00:00:00:00:00:00:01",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"3",$nodeToPortName:"OF|3@OF|00:00:00:00:00:00:00:02",$color:"#C6C014",$nodeFromPortDescription:"s1-eth1",$descTo:"OF|00:00:00:00:00:00:00:02",$nodeToPortDescription:"s2-eth3",$nodeFromPort:"1"}},{nodeTo:"OF|00:00:00:00:00:00:00:01",nodeFrom:"OF|00:00:00:00:00:00:00:02",data:{$nodeFromPortName:"OF|3@OF|00:00:00:00:00:00:00:02",$descFrom:"OF|00:00:00:00:00:00:00:02",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"1",$nodeToPortName:"OF|1@OF|00:00:00:00:00:00:00:01",$color:"#C6C014",$nodeFromPortDescription:"s2-eth3",$descTo:"OF|00:00:00:00:00:00:00:01",$nodeToPortDescription:"s1-eth1",$nodeFromPort:"3"}}]},{id:"OF|00:00:00:00:00:00:00:07",name:"OF|00:00:00:00:00:00:00:07",data:{$x:"210.625",$y:"-278.125",$type:"switch",$desc:"OF|00:00:00:00:00:00:00:07"},adjacencies:[{nodeTo:"OF|00:00:00:00:00:00:00:05",nodeFrom:"OF|00:00:00:00:00:00:00:07",data:{$nodeFromPortName:"OF|3@OF|00:00:00:00:00:00:00:07",$descFrom:"OF|00:00:00:00:00:00:00:07",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"2",$nodeToPortName:"OF|2@OF|00:00:00:00:00:00:00:05",$color:"#C6C014",$nodeFromPortDescription:"s7-eth3",$descTo:"OF|00:00:00:00:00:00:00:05",$nodeToPortDescription:"s5-eth2",$nodeFromPort:"3"}},{nodeTo:"OF|00:00:00:00:00:00:00:07",nodeFrom:"OF|00:00:00:00:00:00:00:05",data:{$nodeFromPortName:"OF|2@OF|00:00:00:00:00:00:00:05",$descFrom:"OF|00:00:00:00:00:00:00:05",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"3",$nodeToPortName:"OF|3@OF|00:00:00:00:00:00:00:07",$color:"#C6C014",$nodeFromPortDescription:"s5-eth2",$descTo:"OF|00:00:00:00:00:00:00:07",$nodeToPortDescription:"s7-eth3",$nodeFromPort:"2"}}]},{id:"OF|00:00:00:00:00:00:00:03",name:"OF|00:00:00:00:00:00:00:03",data:{$x:"-440.625",$y:"-291.875",$type:"switch",$desc:"OF|00:00:00:00:00:00:00:03"},adjacencies:[{nodeTo:"OF|00:00:00:00:00:00:00:02",nodeFrom:"OF|00:00:00:00:00:00:00:03",data:{$nodeFromPortName:"OF|3@OF|00:00:00:00:00:00:00:03",$descFrom:"OF|00:00:00:00:00:00:00:03",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"1",$nodeToPortName:"OF|1@OF|00:00:00:00:00:00:00:02",$color:"#C6C014",$nodeFromPortDescription:"s3-eth3",$descTo:"OF|00:00:00:00:00:00:00:02",$nodeToPortDescription:"s2-eth1",$nodeFromPort:"3"}},{nodeTo:"OF|00:00:00:00:00:00:00:03",nodeFrom:"OF|00:00:00:00:00:00:00:02",data:{$nodeFromPortName:"OF|1@OF|00:00:00:00:00:00:00:02",$descFrom:"OF|00:00:00:00:00:00:00:02",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"3",$nodeToPortName:"OF|3@OF|00:00:00:00:00:00:00:03",$color:"#C6C014",$nodeFromPortDescription:"s2-eth1",$descTo:"OF|00:00:00:00:00:00:00:03",$nodeToPortDescription:"s3-eth3",$nodeFromPort:"1"}}]},{id:"OF|00:00:00:00:00:00:00:04",name:"OF|00:00:00:00:00:00:00:04",data:{$x:"-329.375",$y:"165.625",$type:"switch",$desc:"OF|00:00:00:00:00:00:00:04"},adjacencies:[{nodeTo:"OF|00:00:00:00:00:00:00:02",nodeFrom:"OF|00:00:00:00:00:00:00:04",data:{$nodeFromPortName:"OF|3@OF|00:00:00:00:00:00:00:04",$descFrom:"OF|00:00:00:00:00:00:00:04",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"2",$nodeToPortName:"OF|2@OF|00:00:00:00:00:00:00:02",$color:"#C6C014",$nodeFromPortDescription:"s4-eth3",$descTo:"OF|00:00:00:00:00:00:00:02",$nodeToPortDescription:"s2-eth2",$nodeFromPort:"3"}},{nodeTo:"OF|00:00:00:00:00:00:00:04",nodeFrom:"OF|00:00:00:00:00:00:00:02",data:{$nodeFromPortName:"OF|2@OF|00:00:00:00:00:00:00:02",$descFrom:"OF|00:00:00:00:00:00:00:02",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"3",$nodeToPortName:"OF|3@OF|00:00:00:00:00:00:00:04",$color:"#C6C014",$nodeFromPortDescription:"s2-eth2",$descTo:"OF|00:00:00:00:00:00:00:04",$nodeToPortDescription:"s4-eth3",$nodeFromPort:"2"}}]},{id:"OF|00:00:00:00:00:00:00:05",name:"OF|00:00:00:00:00:00:00:05",data:{$x:"-169.375",$y:"-214.375",$type:"switch",$desc:"OF|00:00:00:00:00:00:00:05"},adjacencies:[{nodeTo:"OF|00:00:00:00:00:00:00:06",nodeFrom:"OF|00:00:00:00:00:00:00:05",data:{$nodeFromPortName:"OF|1@OF|00:00:00:00:00:00:00:05",$descFrom:"OF|00:00:00:00:00:00:00:05",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"3",$nodeToPortName:"OF|3@OF|00:00:00:00:00:00:00:06",$color:"#C6C014",$nodeFromPortDescription:"s5-eth1",$descTo:"OF|00:00:00:00:00:00:00:06",$nodeToPortDescription:"s6-eth3",$nodeFromPort:"1"}},{nodeTo:"OF|00:00:00:00:00:00:00:05",nodeFrom:"OF|00:00:00:00:00:00:00:07",data:{$nodeFromPortName:"OF|3@OF|00:00:00:00:00:00:00:07",$descFrom:"OF|00:00:00:00:00:00:00:07",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"2",$nodeToPortName:"OF|2@OF|00:00:00:00:00:00:00:05",$color:"#C6C014",$nodeFromPortDescription:"s7-eth3",$descTo:"OF|00:00:00:00:00:00:00:05",$nodeToPortDescription:"s5-eth2",$nodeFromPort:"3"}},{nodeTo:"OF|00:00:00:00:00:00:00:01",nodeFrom:"OF|00:00:00:00:00:00:00:05",data:{$nodeFromPortName:"OF|3@OF|00:00:00:00:00:00:00:05",$descFrom:"OF|00:00:00:00:00:00:00:05",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"2",$nodeToPortName:"OF|2@OF|00:00:00:00:00:00:00:01",$color:"#C6C014",$nodeFromPortDescription:"s5-eth3",$descTo:"OF|00:00:00:00:00:00:00:01",$nodeToPortDescription:"s1-eth2",$nodeFromPort:"3"}},{nodeTo:"OF|00:00:00:00:00:00:00:05",nodeFrom:"OF|00:00:00:00:00:00:00:06",data:{$nodeFromPortName:"OF|3@OF|00:00:00:00:00:00:00:06",$descFrom:"OF|00:00:00:00:00:00:00:06",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"1",$nodeToPortName:"OF|1@OF|00:00:00:00:00:00:00:05",$color:"#C6C014",$nodeFromPortDescription:"s6-eth3",$descTo:"OF|00:00:00:00:00:00:00:05",$nodeToPortDescription:"s5-eth1",$nodeFromPort:"3"}},{nodeTo:"OF|00:00:00:00:00:00:00:07",nodeFrom:"OF|00:00:00:00:00:00:00:05",data:{$nodeFromPortName:"OF|2@OF|00:00:00:00:00:00:00:05",$descFrom:"OF|00:00:00:00:00:00:00:05",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"3",$nodeToPortName:"OF|3@OF|00:00:00:00:00:00:00:07",$color:"#C6C014",$nodeFromPortDescription:"s5-eth2",$descTo:"OF|00:00:00:00:00:00:00:07",$nodeToPortDescription:"s7-eth3",$nodeFromPort:"2"}},{nodeTo:"OF|00:00:00:00:00:00:00:05",nodeFrom:"OF|00:00:00:00:00:00:00:01",data:{$nodeFromPortName:"OF|2@OF|00:00:00:00:00:00:00:01",$descFrom:"OF|00:00:00:00:00:00:00:01",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"3",$nodeToPortName:"OF|3@OF|00:00:00:00:00:00:00:05",$color:"#C6C014",$nodeFromPortDescription:"s1-eth2",$descTo:"OF|00:00:00:00:00:00:00:05",$nodeToPortDescription:"s5-eth3",$nodeFromPort:"2"}}]},{id:"OF|00:00:00:00:00:00:00:06",name:"OF|00:00:00:00:00:00:00:06",data:{$x:"147.98413655297236",$y:"-113.76540415005883",$type:"switch",$desc:"OF|00:00:00:00:00:00:00:06"},adjacencies:[{nodeTo:"OF|00:00:00:00:00:00:00:06",nodeFrom:"OF|00:00:00:00:00:00:00:05",data:{$nodeFromPortName:"OF|1@OF|00:00:00:00:00:00:00:05",$descFrom:"OF|00:00:00:00:00:00:00:05",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"3",$nodeToPortName:"OF|3@OF|00:00:00:00:00:00:00:06",$color:"#C6C014",$nodeFromPortDescription:"s5-eth1",$descTo:"OF|00:00:00:00:00:00:00:06",$nodeToPortDescription:"s6-eth3",$nodeFromPort:"1"}},{nodeTo:"OF|00:00:00:00:00:00:00:05",nodeFrom:"OF|00:00:00:00:00:00:00:06",data:{$nodeFromPortName:"OF|3@OF|00:00:00:00:00:00:00:06",$descFrom:"OF|00:00:00:00:00:00:00:06",$bandwidth:"BandWidth[10Gbps]",$nodeToPort:"1",$nodeToPortName:"OF|1@OF|00:00:00:00:00:00:00:05",$color:"#C6C014",$nodeFromPortDescription:"s6-eth3",$descTo:"OF|00:00:00:00:00:00:00:05",$nodeToPortDescription:"s5-eth1",$nodeFromPort:"3"}}]}]);